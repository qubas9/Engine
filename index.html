<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Type3Games Testing Environment</title>
</head>
<body>
    <h1>Type3Games Testing Environment</h1>
    <script type="module" src="./engine.js"></script>
    <script type="module" src="./coretools.js"></script>
    <script type="module" id="main">
        import { GameLoop, Render, Sprite,  Block,  Physic, MovingBlock,Entity,Player } from './engine.js';
        import { Vector } from './coretools.js';

        
            let render = new Render({width : 2000,height : 2000,scale : 2})
            let physic = new Physic()
            let gameLoop =  new GameLoop(physic, render, 60)

            let player = new Player({
                x: 100,
                y: 150,
                imageSrc: "./testasets/Slimer.png",
                width: 32,
                height: 32,
                render: render,
                physic: physic,
                onLoadCallback: () => {
                    gameLoop.start();
                },
                callBackMap: {
                    left: () => player.left(),
                    right: () => player.right(),
                    jump: () => player.jump()
                },
                onClickAcceleration: 100,
                jumpAcceleration: 50,
                gravity: new Vector(0, 100),
                inAirDrag: 1
            });
            console.log(player);
            for (let i = 0; i < 100; i++) {
                let block = new Block({
                    x: i*32,
                    y: 200,
                    width: 32,
                    height: 32,
                    imageSrc: "./testasets/Slimer.png",
                    render: render,
                    physic: physic,
                    friction: 0.9
                });
            }
            for (let i = 0; i < 100; i++) {
                let block = new Block({
                    x: 0,
                    y: i*32,
                    width: 32,
                    height: 32,
                    imageSrc: "./testasets/Slimer.png",
                    render: render,
                    physic: physic
                });
            }

            for (let i = 0; i < 100; i++) {
                let block = new Block({
                    x: 400,
                    y: i*32,
                    width: 32,
                    height: 32,
                    imageSrc: "./testasets/Slimer.png",
                    render: render,
                    physic: physic
                });
            }
            //lower celing
            // for (let i = 0; i < 100; i++) {
            //     let block = new Block({
            //         x: i*32,
            //         y: 130,
            //         width: 32,
            //         height: 32,
            //         imageSrc: "./testasets/Slimer.png",
            //         render: render,
            //         physic: physic
            //     });
            // }

            //higher celing
            for (let i = 0; i < 100; i++) {
                let block = new Block({
                    x: i*32,
                    y: 50,
                    width: 32,
                    height: 32,
                    imageSrc: "./testasets/Slimer.png",
                    render: render,
                    physic: physic
                });
            }

            // let movingBlock = new MovingBlock({
            //     startx: 50,
            //         starty: 50,
            //     endx: 50,
            //     endy: 200,
            //     routeTime: 2,
            //         width: 32,
            //         height: 32,
            //         imageSrc: "./testasets/Slimer.png",
            //         render: render,
            //         physic: physic,
            //         friction: 0.9
                    
            // })
    </script>
</body>
</html>      